/* Codestar Framework | A Simple and Lightweight WordPress Option Framework - v2.0.0*/

!function(e,n,t,i){"use strict";var s=s||{};s.funcs={},s.vars={},s.vars.onloaded=!1,s.vars.$window=e(n),s.vars.$document=e(t),s.vars.is_rtl=e("body").hasClass("rtl"),s.helper={inputs_rename:function(n){n.each(function(n){e(this).find(":input").each(function(){this.name=this.name.replace(/\[(\d+)\]/,"["+n+"]")})})},debounce:function(e,n,t){var i;return function(){var s=this,a=arguments,c=t&&!i;clearTimeout(i),i=setTimeout(function(){i=null,t||e.apply(s,a)},n),c&&e.apply(s,a)}},get_cookie:function(e){var n,i,s=t.cookie,a=e+"=";if(s){if(-1===(i=s.indexOf("; "+a))){if(0!==(i=s.indexOf(a)))return null}else i+=2;return-1===(n=s.indexOf(";",i))&&(n=s.length),decodeURIComponent(s.substring(i+a.length,n))}},set_cookie:function(e,n,i,s,a,c){var o=new Date;"object"==typeof i&&i.toGMTString?i=i.toGMTString():parseInt(i,10)?(o.setTime(o.getTime()+1e3*parseInt(i,10)),i=o.toGMTString()):i="",t.cookie=e+"="+encodeURIComponent(n)+(i?"; expires="+i:"")+(s?"; path="+s:"")+(a?"; domain="+a:"")+(c?"; secure":"")},remove_cookie:function(e,n,t,i){s.helper.set_cookie(e,"",-1e3,n,t,i)}},e.fn.csf_clone=function(){for(var n=e.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),i=n.find("select").add(n.filter("select")),s=0;s<t.length;++s)for(var a=0;a<t[s].options.length;++a)!0===t[s].options[a].selected&&(i[s].options[a].selected=!0);return n},e.fn.csf_expand_all=function(){return this.each(function(){e(this).on("click",function(n){n.preventDefault(),e(".csf-wrapper").toggleClass("csf-show-all"),e(".csf-section").csf_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.csf_nav_options=function(){return this.each(function(){var t,s=e(this),a=s.find("a"),c=s.closest(".csf").find(".csf-section-id");e(n).on("hashchange",function(){var s=n.location.hash.match(new RegExp("tab=([^&]*)")),o=s?s[1]:a.first().attr("href").replace("#tab=",""),r=e("#csf-tab-link-"+o);if(r.length>0){r.closest(".csf-tab-depth-0").addClass("csf-tab-active").siblings().removeClass("csf-tab-active"),a.removeClass("csf-section-active"),r.addClass("csf-section-active"),t!==i&&t.hide();var f=e("#csf-section-"+o);f.css({display:"block"}),f.csf_reload_script(),c.val(o),t=f}}).trigger("hashchange")})},e.fn.csf_nav_metabox=function(){return this.each(function(){var n,t,a=e(this),c=a.find("a"),o=a.data("unique"),r=e("#post_ID").val()||"global";c.on("click",function(a){a.preventDefault();var c=e(this),f=c.data("section");t!==i&&t.removeClass("csf-section-active"),n!==i&&n.hide(),c.addClass("csf-section-active");var l=e("#csf-section-"+f);l.css({display:"block"}),l.csf_reload_script(),s.helper.set_cookie("csf-last-metabox-tab-"+r+"-"+o,f),n=l,t=c});var f=s.helper.get_cookie("csf-last-metabox-tab-"+r+"-"+o);f?a.find('a[data-section="'+f+'"]').trigger("click"):c.first("a").trigger("click")})},e.fn.csf_page_templates=function(){this.length&&e(t).on("change",".editor-page-attributes__template select, #page_template",function(){e(".csf-page-templates").addClass("csf-hide"),e(".csf-page-"+e(this).val().toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("csf-hide")})},e.fn.csf_post_formats=function(){this.length&&e(t).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){e(".csf-post-formats").addClass("csf-hide"),e(".csf-post-format-"+e(this).val()).removeClass("csf-hide")})},e.fn.csf_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var n=e(this).val(),t=e(".csf-wrapper"),i=t.find(".csf-section").find("> .csf-field:not(.hidden)"),s=i.find("> .csf-title, .csf-search-tags");n.length>3?(i.addClass("csf-hidden"),t.addClass("csf-search-all"),s.each(function(){var t=e(this);if(t.text().match(new RegExp(".*?"+n+".*?","i"))){var i=t.closest(".csf-field");i.removeClass("csf-hidden"),i.parent().csf_reload_script()}})):(i.removeClass("csf-hidden"),t.removeClass("csf-search-all"))})})},e.fn.csf_sticky=function(){return this.each(function(){var i=e(this),s=e(n),a=i.find(".csf-header-inner"),c=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),o=0,r=!1,f=function(){r||requestAnimationFrame(function(){var e,s,f;e=i.offset().top,s=Math.max(32,e-o),f=Math.max(t.documentElement.clientWidth,n.innerWidth||0),s<=32&&f>782?(a.css({width:i.outerWidth()-c}),i.css({height:i.outerHeight()}).addClass("csf-sticky")):(a.removeAttr("style"),i.removeAttr("style").removeClass("csf-sticky")),r=!1}),r=!0},l=function(){o=s.scrollTop(),f()};s.on("scroll resize",l),l()})},e.fn.csf_dependency=function(n){return this.each(function(){var t=e(this),i="sub"===n?"sub-":"",s=e.csf_deps.createRuleset(),a=[];t.find("[data-"+i+"controller]").not(".csf-no-script").each(function(){var n=e(this),t=n.data(i+"controller").split("|"),c=n.data(i+"condition").split("|"),o=n.data(i+"value").toString().split("|"),r=s;e.each(t,function(e,t){var s=o[e]||"",f=c[e]||c[0];(r=r.createRule("[data-"+i+'depend-id="'+t+'"]',f,s)).include(n),a.push(t)})}),e.csf_deps.enable(t,s,a)})},e.fn.csf_field_accordion=function(){return this.each(function(){e(this).find(".csf-accordion-title").on("click",function(){var n=e(this),t=n.find(".csf-accordion-icon"),i=n.next();t.hasClass("fa-angle-right")?t.removeClass("fa-angle-right").addClass("fa-angle-down"):t.removeClass("fa-angle-down").addClass("fa-angle-right"),i.data("opened")||(i.find(".csf-field").removeClass("csf-no-script"),i.csf_reload_script("sub"),i.data("opened",!0)),i.toggleClass("csf-accordion-open")})})},e.fn.csf_field_backup=function(){return this.each(function(){if(wp.customize!==i){var t=e(this),s=e("body"),a=t.find(".csf-import"),c=t.find(".csf-reset"),o=!1;c.on("click",function(e){e.preventDefault(),o||(s.addClass("csf-opacity"),wp.ajax.post("csf-reset",{unique:c.data("unique"),nonce:c.data("nonce")}).done(function(e){n.location.reload(!0)}).fail(function(e){alert(e.error),o=!1,s.removeClass("csf-opacity")})),o=!0}),a.on("click",function(e){e.preventDefault(),o||(s.addClass("csf-opacity"),wp.ajax.post("csf-import",{unique:a.data("unique"),nonce:a.data("nonce"),import_data:t.find(".csf-import-data").val()}).done(function(e){n.location.reload(!0)}).fail(function(e){alert(e.error),o=!1,s.removeClass("csf-opacity")})),o=!0})}})},e.fn.csf_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var n=e(this).find("textarea"),t=n.data("editor"),i=CodeMirror.fromTextArea(n[0],t);CodeMirror.modeURL=t.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(i,t.mode),i.on("change",function(e,t){n.val(i.getValue()).trigger("change")})}})},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var n=6-e.length-1;n>=0;n--)e="0"+e;return"#"+e}),s.funcs.parse_color=function(e){var n=e.replace(/\s+/g,""),t=-1!==n.indexOf("rgba")?parseFloat(100*n.replace(/^.*,(.+)\)/,"$1")):100;return{value:n,transparent:t,rgba:t<100}},e.fn.csf_field_color=function(){return this.each(function(){var n,t=e(this),i=t.find(".csf-color-picker"),a=t.find(".wp-picker-container"),c=s.funcs.parse_color(i.val());a.length&&a.after(i).remove(),i.wpColorPicker({clear:function(){i.trigger("keyup")},change:function(e,t){var s=t.color.toString();n.removeClass("csf--transparent-active"),n.find(".csf--transparent-offset").css("background-color",s),i.val(s).trigger("change")},create:function(){n=t.find(".wp-picker-container");var a=i.data("a8cIris"),o=e('<div class="csf--transparent-wrap"><div class="csf--transparent-slider"></div><div class="csf--transparent-offset"></div><div class="csf--transparent-text"></div><div class="csf--transparent-button button button-small">transparent</div></div>').appendTo(n.find(".wp-picker-holder")),r=o.find(".csf--transparent-slider"),f=o.find(".csf--transparent-text"),l=o.find(".csf--transparent-offset"),d=o.find(".csf--transparent-button");"transparent"===i.val()&&n.addClass("csf--transparent-active"),d.on("click",function(){"transparent"!==i.val()?(i.val("transparent").trigger("change"),n.addClass("csf--transparent-active")):(i.val(a._color.toString()).trigger("change"),n.removeClass("csf--transparent-active"))}),r.slider({value:c.transparent,step:1,min:0,max:100,slide:function(e,n){var t=parseFloat(n.value/100);a._color._alpha=t,i.wpColorPicker("color",a._color.toString()),f.text(1===t||0===t?"":t)},create:function(){var t=parseFloat(c.transparent/100),d=t<1?t:"";f.text(d),l.css("background-color",c.value),n.on("click",".wp-picker-clear",function(){a._color._alpha=1,f.text("").trigger("change"),r.slider("option","value",100).trigger("slide")}),n.on("click",".wp-picker-default",function(){var e=s.funcs.parse_color(i.data("default-color")),n=parseFloat(e.transparent/100),t=n<1?n:"";a._color._alpha=n,f.text(t),r.slider("option","value",e.transparent).trigger("slide")}),n.on("click",".wp-color-result",function(){o.toggle()}),e("body").on("click.wpcolorpicker",function(){o.hide()})}})}})})},e.fn.csf_field_date=function(){return this.each(function(){var n,t=e(this),i=t.find("input"),s=JSON.parse(t.find(".csf-datepicker-settings").val()),a='<div class="csf-datepicker-wrapper"></div>',c={beforeShow:function(t,i){(n=e("#ui-datepicker-div")).wrap(a)},onClose:function(){var e=setInterval(function(){n.is(":hidden")&&(n.unwrap(a),clearInterval(e))},100)}};s=e.extend({},s,c),i.datepicker(s)})},e.fn.csf_field_gallery=function(){return this.each(function(){var n,t=e(this),i=t.find(".csf-edit-gallery"),s=t.find(".csf-clear-gallery"),a=t.find("ul"),c=t.find("input");t.find("img");t.on("click",".csf-button, .csf-edit-gallery",function(t){var o=e(this),r=c.val(),f=o.hasClass("csf-edit-gallery")?"edit":"add",l="add"!==f||r.length?"gallery-edit":"gallery";t.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&("gallery"===l?(n=wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(n=wp.media.gallery.edit('[gallery ids="'+r+'"]'),"add"===f&&n.setState("gallery-library")),n.on("update",function(e){a.empty();var n=e.models.map(function(e){var n=e.toJSON(),t=void 0!==n.sizes.thumbnail?n.sizes.thumbnail.url:n.url;return a.append('<li><img src="'+t+'"></li>'),n.id});c.val(n.join(",")).trigger("change"),s.removeClass("hidden"),i.removeClass("hidden")}))}),s.on("click",function(e){e.preventDefault(),a.empty(),c.val("").trigger("change"),s.addClass("hidden"),i.addClass("hidden")})})},e.fn.csf_field_group=function(){return this.each(function(){var n=e(this),t=n.find(".csf-cloneable-wrapper"),i=n.find(".csf-cloneable-hidden"),a=n.find(".csf-cloneable-max"),c=n.find(".csf-cloneable-min"),o=t.data("unique-id"),r=parseInt(t.data("max")),f=parseInt(t.data("min"));t.accordion({header:".csf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"csf-cloneable-header-icon fa fa-angle-right",activeHeader:"csf-cloneable-header-icon fa fa-angle-down"},beforeActivate:function(e,n){var t=n.newPanel,i=n.newHeader;if(t.length&&!t.data("opened")){var s=t.children(),a=s.first().find(":input").first(),c=i.find(".csf-cloneable-value");a.on("change keyup",function(e){c.text(a.val())}),s.removeClass("csf-no-script"),t.csf_reload_script("sub"),t.data("opened",!0)}}}),t.sortable({axis:"y",handle:".csf-cloneable-title, .csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,n){t.accordion({active:!1}),t.sortable("refreshPositions")},stop:function(e,n){s.helper.inputs_rename(t.find(".csf-cloneable-item")),t.csf_customizer_refresh()}}),n.on("click",".csf-cloneable-add",function(e){e.preventDefault();var n=t.find(".csf-cloneable-item").length;if(c.hide(),r&&n+1>r)a.show();else{var s=i.csf_clone().removeClass("csf-cloneable-hidden");s.find(":input").each(function(){this.name=this.name.replace("_nonce",o).replace("num",n)}),t.append(s),t.accordion("refresh"),t.accordion({active:n}),t.csf_customizer_refresh(),t.csf_customizer_listen(!0)}}),t.on("click",".csf-cloneable-clone",function(n){n.preventDefault();var i=t.find(".csf-cloneable-item").length;if(c.hide(),r&&i+1>r)a.show();else{var o=e(this).closest(".csf-cloneable-item"),f=o.csf_clone().addClass("csf-cloned");t.children().eq(o.index()).after(f),s.helper.inputs_rename(t.find(".csf-cloneable-item")),t.accordion("refresh"),t.csf_customizer_refresh(),t.csf_customizer_listen(!0)}}),t.on("click",".csf-cloneable-remove",function(n){n.preventDefault();var i=t.find(".csf-cloneable-item").length;a.hide(),c.hide(),f&&i-1<f?c.show():(e(this).closest(".csf-cloneable-item").remove(),s.helper.inputs_rename(t.find(".csf-cloneable-item")),t.csf_customizer_refresh())})})},e.fn.csf_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".csf-icon-add",function(t){t.preventDefault();var i=e(this),a=e("#csf-modal-icon");a.show(),s.vars.$icon_target=n,s.vars.icon_modal_loaded||(a.find(".csf-modal-loading").show(),wp.ajax.post("csf-get-icons",{nonce:i.data("nonce")}).done(function(n){a.find(".csf-modal-loading").hide(),s.vars.icon_modal_loaded=!0;var t=a.find(".csf-modal-load").html(n.content);t.on("click","a",function(n){n.preventDefault();var t=e(this).data("csf-icon");s.vars.$icon_target.find("i").removeAttr("class").addClass(t),s.vars.$icon_target.find("input").val(t).trigger("change"),s.vars.$icon_target.find(".csf-icon-preview").removeClass("hidden"),s.vars.$icon_target.find(".csf-icon-remove").removeClass("hidden"),a.hide()}),a.on("change keyup",".csf-icon-search",function(){var n=e(this).val();t.find("a").each(function(){var t=e(this);t.data("csf-icon").search(new RegExp(n,"i"))<0?t.hide():t.show()})}),a.on("click",".csf-modal-close, .csf-modal-overlay",function(){a.hide()})}))}),n.on("click",".csf-icon-remove",function(t){t.preventDefault(),n.find(".csf-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.csf_field_media=function(){return this.each(function(){var n,t=e(this),i=t.find(".csf--button"),s=t.find(".csf--remove");i.on("click",function(e){e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&(n?n.open():((n=wp.media({library:{type:i.data("library").split(",")}})).on("select",function(){var e,a=n.state().get("selection").first().attributes,c=i.data("preview-size")||"thumbnail";t.find(".csf--url").val(a.url),t.find(".csf--id").val(a.id),t.find(".csf--width").val(a.width),t.find(".csf--height").val(a.height),t.find(".csf--alt").val(a.alt),t.find(".csf--title").val(a.title),t.find(".csf--description").val(a.description),e=void 0!==a.sizes&&void 0!==a.sizes.thumbnail&&"thumbnail"===c?a.sizes.thumbnail.url:void 0!==a.sizes&&void 0!==a.sizes.full?a.sizes.full.url:a.icon,s.removeClass("hidden"),t.find(".csf--preview").removeClass("hidden"),t.find(".csf--src").attr("src",e),t.find(".csf--thumbnail").val(e).trigger("change")}),n.open()))}),s.on("click",function(e){e.preventDefault(),s.addClass("hidden"),t.find(".csf--preview").addClass("hidden"),t.find("input").val(""),t.find(".csf--thumbnail").trigger("change")})})},e.fn.csf_field_repeater=function(){return this.each(function(){var n=e(this),t=n.find(".csf-cloneable-wrapper"),i=n.find(".csf-cloneable-hidden"),a=n.find(".csf-cloneable-max"),c=n.find(".csf-cloneable-min"),o=t.data("unique-id"),r=parseInt(t.data("max")),f=parseInt(t.data("min"));t.sortable({axis:"y",handle:".csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",stop:function(e,n){s.helper.inputs_rename(t.find(".csf-cloneable-item")),t.csf_customizer_refresh()}}),n.on("click",".csf-cloneable-add",function(e){e.preventDefault();var n=t.find(".csf-cloneable-item").length;if(c.hide(),r&&n+1>r)a.show();else{var s=i.csf_clone().removeClass("csf-cloneable-hidden");t.append(s),s.find(":input").each(function(){this.name=this.name.replace("_nonce",o).replace("num",n)}),s.find(".csf-field").removeClass("csf-no-script"),s.csf_reload_script("sub"),t.csf_customizer_refresh(),t.csf_customizer_listen(!0)}}),t.on("click",".csf-cloneable-clone",function(n){n.preventDefault();var i=t.find(".csf-cloneable-item").length;if(c.hide(),r&&i+1>r)a.show();else{var o=e(this).closest(".csf-cloneable-item"),f=o.index(),l=o.csf_clone();t.children().eq(f).after(l),l.addClass("csf-cloned").csf_reload_script("sub"),s.helper.inputs_rename(t.find(".csf-cloneable-item")),t.csf_customizer_refresh(),t.csf_customizer_listen(!0)}}),t.on("click",".csf-cloneable-remove",function(n){n.preventDefault();var i=t.find(".csf-cloneable-item").length;a.hide(),c.hide(),f&&i-1<f?c.show():(e(this).closest(".csf-cloneable-item").remove(),s.helper.inputs_rename(t),t.csf_customizer_refresh())})})},e.fn.csf_field_slider=function(){return this.each(function(){var n=e(this),t=n.find("input"),i=n.find(".csf-slider-ui"),s=t.data(),a=t.val()||0;i.slider({range:"min",value:a,min:s.min,max:s.max,step:s.step,slide:function(e,n){t.val(n.value).trigger("change")}}),t.keyup(function(){i.slider("value",t.val())})})},e.fn.csf_field_sortable=function(){return this.each(function(){var n=e(this).find(".csf--sortable");n.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",stop:function(e,t){n.csf_customizer_refresh()}})})},e.fn.csf_field_sorter=function(){return this.each(function(){var n=e(this),t=n.find(".csf-enabled"),i=n.find(".csf-disabled"),s=!!i.length&&i;t.sortable({connectWith:s,placeholder:"ui-sortable-placeholder",update:function(e,t){var i=t.item.find("input");t.item.parent().hasClass("csf-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),n.csf_customizer_refresh()}}),s&&s.sortable({connectWith:t,placeholder:"ui-sortable-placeholder"})})},e.fn.csf_field_spinner=function(){return this.each(function(){var n=e(this).find("input");n.spinner({max:n.data("max")||100,min:n.data("min")||0,step:n.data("step")||1,spin:function(e,t){n.val(t.value).trigger("change")}})})},e.fn.csf_field_switcher=function(){return this.each(function(){var n=e(this).find(".csf--switcher");n.on("click",function(){var e=0,t=n.find("input");n.hasClass("csf--active")?n.removeClass("csf--active"):(e=1,n.addClass("csf--active")),t.val(e).trigger("change")})})},e.fn.csf_field_tabbed=function(){return this.each(function(){var n=e(this),t=n.find(".csf-tabbed-nav a"),i=n.find(".csf-tabbed-section");t.on("click",function(n){n.preventDefault();var t=e(this),s=t.index();t.addClass("csf-tabbed-active").siblings().removeClass("csf-tabbed-active"),i.eq(s).removeClass("hidden").siblings().addClass("hidden")})})},e.fn.csf_field_typography=function(){return this.each(function(){var n=this,t=e(this),i=[],a=csf_typography_json.webfonts,c=csf_typography_json.googlestyles,o=csf_typography_json.defaultstyles;n.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},n.sanitize_style=function(e){return c[e]?c[e]:e},n.load_google_font=function(e,n,t){e&&"object"==typeof WebFont&&(n=n?n.replace("normal",""):"",t=t?t.replace("normal",""):"",(n||t)&&(e=e+":"+n+t),-1===i.indexOf(e)&&WebFont.load({google:{families:[e]}}),i.push(e))},n.append_select_options=function(t,i,s,a,c){t.find("option").not(":first").remove();var o="";e.each(i,function(e,t){var i,r=t;i=c?s&&-1!==s.indexOf(t)?" selected":"":s&&s===t?" selected":"","subset"===a?r=n.sanitize_subset(t):"style"===a&&(r=n.sanitize_style(t)),o+='<option value="'+t+'"'+i+">"+r+"</option>"}),t.append(o).trigger("csf.change").trigger("chosen:updated")},n.init=function(){var i=[],c=t.find(".csf--typography"),r=t.find(".csf--type"),f=c.data("unit"),l=c.data("exclude")?c.data("exclude").split(","):[];t.find(".csf--chosen").length&&t.find("select").chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"});var d=t.find(".csf--font-family"),p=d.val();d.find("option").not(":first-child").remove();var u="";e.each(a,function(n,t){l&&-1!==l.indexOf(n)||(u+='<optgroup label="'+t.label+'">',e.each(t.fonts,function(e,t){u+='<option value="'+(t="object"==typeof t?e:t)+'" data-type="'+n+'"'+(t===p?" selected":"")+">"+t+"</option>"}),u+="</optgroup>")}),d.append(u).trigger("chosen:updated");var h=t.find(".csf--block-font-style");if(h.length){var v=t.find(".csf--font-style-select"),g=v.val()?v.val().replace(/normal/g,""):"";v.on("change csf.change",function(e){var n=v.val();!n&&i&&-1===i.indexOf("normal")&&(n=i[0]);var s=n&&"italic"!==n&&"normal"===n?"normal":"",a=n&&"italic"!==n&&"normal"!==n?n.replace("italic",""):s,c=n&&"italic"===n.substr(-6)?"italic":"";t.find(".csf--font-weight").val(a),t.find(".csf--font-style").val(c)});var m=t.find(".csf--block-extra-styles");if(m.length)var _=t.find(".csf--extra-styles"),b=_.val()}var y=t.find(".csf--block-subset");if(y.length)var C=t.find(".csf--subset"),w=C.val(),k=C.data("multiple")||!1;var x=t.find(".csf--block-backup-font-family");d.on("change csf.change",function(e){y.length&&y.addClass("hidden"),m.length&&m.addClass("hidden"),x.length&&x.addClass("hidden");var t=d.find(":selected"),s=t.val(),c=t.data("type");if(c&&s){if("google"!==c&&"custom"!==c||!x.length||x.removeClass("hidden"),h.length){var f=o;"google"===c&&a[c].fonts[s][0]?f=a[c].fonts[s][0]:"custom"===c&&a[c].fonts[s]&&(f=a[c].fonts[s]),i=f;var l=-1!==f.indexOf("normal")?"normal":f[0],p=g&&-1!==f.indexOf(g)?g:l;n.append_select_options(v,f,p,"style"),g=!1,h.removeClass("hidden"),"google"===c&&m.length&&f.length>1&&(n.append_select_options(_,f,b,"style",!0),b=!1,m.removeClass("hidden"))}if("google"===c&&y.length&&a[c].fonts[s][1]){var u=a[c].fonts[s][1],z=u.length<2&&"latin"!==u[0]?u[0]:"",D=w&&-1!==u.indexOf(w)?w:z;D=k&&w?w:D,n.append_select_options(C,u,D,"subset",k),w=!1,y.removeClass("hidden")}}else y.length&&(C.find("option").not(":first-child").remove(),C.trigger("chosen:updated")),h.length&&(v.find("option").not(":first-child").remove(),v.trigger("chosen:updated"));r.val(c)}).trigger("csf.change");var z=t.find(".csf--block-preview");if(z.length){var D=t.find(".csf--preview");t.on("change",s.helper.debounce(function(e){z.removeClass("hidden");var i=d.val(),s=t.find(".csf--font-weight").val(),a=t.find(".csf--font-style").val(),c=t.find(".csf--font-size").val(),o=t.find(".csf--font-variant").val(),r=t.find(".csf--line-height").val(),l=t.find(".csf--text-align").val(),p=t.find(".csf--text-transform").val(),u=t.find(".csf--text-decoration").val(),h=t.find(".csf--color").val(),v=t.find(".csf--word-spacing").val(),g=t.find(".csf--letter-spacing").val(),m=t.find(".csf--custom-style").val();"google"===t.find(".csf--type").val()&&n.load_google_font(i,s,a);var _={};i&&(_.fontFamily=i),s&&(_.fontWeight=s),a&&(_.fontStyle=a),o&&(_.fontVariant=o),c&&(_.fontSize=c+f),r&&(_.lineHeight=r+f),g&&(_.letterSpacing=g+f),v&&(_.wordSpacing=v+f),l&&(_.textAlign=l),p&&(_.textTransform=p),u&&(_.textDecoration=u),h&&(_.color=h),D.removeAttr("style"),m&&D.attr("style",m),D.css(_)},100)),z.on("click",function(){D.toggleClass("csf--black-background");var e=z.find(".csf--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),z.hasClass("hidden")||t.trigger("change")}},n.init()})},e.fn.csf_field_upload=function(){return this.each(function(){var n,t=e(this),i=t.find("input"),s=t.find(".csf--button"),a=t.find(".csf--remove");s.data("library")&&s.data("library").split(",");i.on("change",function(e){i.val()?a.removeClass("hidden"):a.addClass("hidden")}),s.on("click",function(e){e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&(n?n.open():((n=wp.media({library:{type:s.data("library").split(",")}})).on("select",function(){i.val(n.state().get("selection").first().attributes.url).trigger("change")}),n.open()))}),a.on("click",function(e){e.preventDefault(),i.val("").trigger("change")})})},e.fn.csf_confirm=function(){return this.each(function(){e(this).on("click",function(e){confirm("Are you sure?")||e.preventDefault()})})},e.fn.serializeObject=function(){var n={};return e.each(this.serializeArray(),function(t,s){var a=s.name,c=s.value;n[a]=n[a]===i?c:e.isArray(n[a])?n[a].concat(c):[n[a],c]}),n},e.fn.csf_save=function(){return this.each(function(){var n,t=e(this),i=e(".csf-save"),s=e(".csf-options"),a=!1;t.on("click",function(c){if(!a){var o=t.data("save"),r=t.val();i.attr("value",o),t.hasClass("csf-save-ajax")&&(c.preventDefault(),s.addClass("csf-saving"),i.prop("disabled",!0),"object"==typeof tinyMCE&&tinyMCE.triggerSave(),wp.ajax.post("csf_"+s.data("unique")+"_ajax_save",{data:e("#csf-form").serializeJSONCSF()}).done(function(t){clearTimeout(n);var c=e(".csf-form-success");c.empty().append(t.notice).slideDown("fast",function(){n=setTimeout(function(){c.slideUp("fast")},2e3)}),e(".csf-error").remove();var o=e(".csf-form-error");if(o.empty().hide(),Object.keys(t.errors).length){var f='<i class="csf-label-error csf-error">!</i>';e.each(t.errors,function(n,t){var i=e('[data-depend-id="'+n+'"]'),s=e("#csf-tab-link-"+(i.closest(".csf-section").index()+1)),a=s.closest(".csf-tab-depth-0");i.closest(".csf-fieldset").append('<p class="csf-text-error csf-error">'+t+"</p>"),s.find(".csf-error").length||s.append(f),a.find(".csf-arrow .csf-error").length||a.find(".csf-arrow").append(f),console.log(t),o.append("<div>"+f+" "+t+"</div>")}),o.show()}s.removeClass("csf-saving"),i.prop("disabled",!1).attr("value",r),a=!1}).fail(function(e){alert(e.error)}))}a=!0})})},e.fn.csf_taxonomy=function(){return this.each(function(){var n=e(this),t=n.parent();if("addtag"===t.attr("id")){var i=t.find("#submit"),s=n.find(".csf-field").csf_clone(),a=e("#the-list"),c=!1;i.on("click",function(){c||a.on("DOMNodeInserted",function(){c&&(n.empty(),n.html(s),s=s.csf_clone(),n.csf_reload_script(),c=!1)}),c=!0})}})},e.fn.csf_shortcode=function(){var a=this;return a.shortcode_parse=function(n,t){var i="";return e.each(n,function(n,s){i+="["+(t=t||n),e.each(s,function(e,n){"content"===e?(i+="]",i+=n,i+="[/"+t):i+=a.shortcode_tags(e,n)}),i+="]"}),i},a.shortcode_tags=function(n,t){var i="";return""!==t&&("object"!=typeof t||e.isArray(t)?i+=" "+n.replace("-","_")+'="'+t.toString()+'"':e.each(t,function(e,n){switch(e){case"background-image":n=n.url?n.url:""}""!==n&&(i+=" "+e.replace("-","_")+'="'+n.toString()+'"')})),i},a.insertAtChars=function(e,n){var t=void 0!==e[0].name?e[0]:e;return t.value.length&&void 0!==t.selectionStart?(t.focus(),t.value.substring(0,t.selectionStart)+n+t.value.substring(t.selectionEnd,t.value.length)):(t.focus(),n)},a.send_to_editor=function(n,t){var i;if("undefined"!=typeof tinymce&&(i=tinymce.get(t)),i&&!i.isHidden())i.execCommand("mceInsertContent",!1,n);else{var s=e("#"+t);s.val(a.insertAtChars(s,n)).trigger("change")}},this.each(function(){var c,o,r,f,l,d,p,u,h,v=e(this),g=v.find(".csf-modal-load"),m=(v.find(".csf-modal-content"),v.find(".csf-modal-insert")),_=v.find(".csf-modal-loading"),b=v.find("select"),y=v.data("modal-id"),C=v.data("nonce");e(t).on("click",'.csf-shortcode-button[data-modal-id="'+y+'"]',function(n){n.preventDefault(),h=e(this),c=h.data("editor-id")||!1,o=h.data("target-id")||!1,r=h.data("gutenberg-id")||!1,v.show(),v.hasClass("csf-shortcode-single")&&l===i&&b.trigger("change")}),b.on("change",function(){var n=e(this),t=n.find(":selected");f=n.val(),l=t.data("shortcode"),d=t.data("view")||"normal",p=t.data("group")||l,g.empty(),f?(_.show(),wp.ajax.post("csf-get-shortcode-"+y,{shortcode_key:f,nonce:C}).done(function(n){_.hide();var t=e(n.content).appendTo(g);m.parent().removeClass("hidden"),u=t.find(".csf--repeat-shortcode").csf_clone(),t.csf_reload_script("sub")})):m.parent().addClass("hidden")}),m.on("click",function(t){t.preventDefault();var i="",s=v.find(".csf-field:not(.hidden)").find(":input").serializeObjectCSF();switch(d){case"contents":var f=l?s[l]:s;e.each(f,function(e,n){var t=l||e;i+="["+t+"]"+n+"[/"+t+"]"});break;case"group":i+="["+l,e.each(s[l],function(e,n){i+=a.shortcode_tags(e,n)}),i+="]",i+=a.shortcode_parse(s[p],p),i+="[/"+l+"]";break;case"repeater":i+=a.shortcode_parse(s[p],p);break;default:i+=a.shortcode_parse(s)}if(r){var u=n.csf_gutenberg_props.attributes.hasOwnProperty("shortcode")?n.csf_gutenberg_props.attributes.shortcode:"";n.csf_gutenberg_props.setAttributes({shortcode:u+i})}else if(c)a.send_to_editor(i,c);else{var g=o?e(o):h.parent().find("textarea");g.val(a.insertAtChars(g,i)).trigger("change")}v.hide()}),v.on("click",".csf--repeat-button",function(e){e.preventDefault();var n=v.find(".csf--repeatable"),t=u.csf_clone(),i=t.find(".csf--remove");t.appendTo(n),t.csf_reload_script("sub"),s.helper.inputs_rename(v.find(".csf--repeat-shortcode")),i.on("click",function(){t.remove(),s.helper.inputs_rename(v.find(".csf--repeat-shortcode"))})}),v.on("click",".csf-modal-close, .csf-modal-overlay",function(){v.hide()})})},e.fn.csf_checker=function(){return this.each(function(){var n=e(this);n.on("click",function(){var e=0,t=n.find(".csf--input"),i=n.find(".csf--checkbox");"1"===t.val()?(e=0,i.prop("checked",!1)):(e=1,i.prop("checked",!0)),t.val(e).trigger("change")})})},e.fn.csf_siblings=function(){return this.each(function(){var n=e(this),t=n.find(".csf--sibling"),i=n.data("multiple")||!1;t.on("click",function(){var t=e(this);i?t.hasClass("csf--active")?(t.removeClass("csf--active"),t.find("input").prop("checked",!1).trigger("change")):(t.addClass("csf--active"),t.find("input").prop("checked",!0).trigger("change")):(n.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("csf--active").siblings().removeClass("csf--active"))})})},e.fn.csf_chosen=function(){return this.each(function(){e(this).chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})})},e.fn.csf_tooltip=function(){return this.each(function(){var n,t,a=e(this);a.on({mouseenter:function(){n=e('<div class="csf-tooltip"></div>').html(a.find(".csf-help-text").html()).appendTo("body"),t=s.vars.is_rtl?a.offset().left+24:a.offset().left-n.outerWidth(),n.css({top:a.offset().top-(n.outerHeight()/2-14),left:t})},mouseleave:function(){n!==i&&n.remove()}})})},e.fn.csf_customizer_refresh=function(){return this.each(function(){var n=e(this),s=n.closest(".csf-customize-complex");if(e(t).trigger("csf-customizer-refresh",n),wp.customize!==i&&0!==s.length){var a=s.find(":input"),c=s.data("unique-id"),o=s.data("option-id"),r=a.serializeObjectCSF(),f=e.isEmptyObject(r)?"":r[c][o];wp.customize.control(c+"["+o+"]").setting.set(f)}})},e.fn.csf_customizer_listen=function(n){return this.each(function(){if(wp.customize!==i){var t=n?e(this).closest(".csf-customize-complex"):e(this),a=t.find(":input"),c=t.data("unique-id"),o=t.data("option-id");c!==i&&a.on("change keyup",s.helper.debounce(function(){var n=t.find(":input").serializeObjectCSF(),i=e.isEmptyObject(n)?"":n[c][o];wp.customize.control(c+"["+o+"]").setting.set(i)},250))}})},e(t).on("expanded",".control-section-csf",function(){var n=e(this);n.data("inited")||(n.csf_reload_script(),n.find(".csf-customize-complex").csf_customizer_listen())}),e.fn.csf_widgets=function(){return this.each(function(){e(this).find(".widget-liquid-right .widget").each(function(){var n=e(this);n.find(".widget-top").on("click",function(){n.csf_reload_script()})})})},e(t).on("widget-added widget-updated",function(e,n){n.csf_reload_script()}),e.fn.csf_reload_script=function(n,i){return this.each(function(){var s=e(this);s.data("inited")&&!i||(s.find(".csf-field-accordion").not(".csf-no-script").csf_field_accordion(),s.find(".csf-field-backup").not(".csf-no-script").csf_field_backup(),s.find(".csf-field-code_editor").not(".csf-no-script").csf_field_code_editor(),s.find(".csf-field-color").not(".csf-no-script").csf_field_color(),s.find(".csf-field-date").not(".csf-no-script").csf_field_date(),s.find(".csf-field-gallery").not(".csf-no-script").csf_field_gallery(),s.find(".csf-field-group").not(".csf-no-script").csf_field_group(),s.find(".csf-field-icon").not(".csf-no-script").csf_field_icon(),s.find(".csf-field-media").not(".csf-no-script").csf_field_media(),s.find(".csf-field-repeater").not(".csf-no-script").csf_field_repeater(),s.find(".csf-field-slider").not(".csf-no-script").csf_field_slider(),s.find(".csf-field-sortable").not(".csf-no-script").csf_field_sortable(),s.find(".csf-field-sorter").not(".csf-no-script").csf_field_sorter(),s.find(".csf-field-spinner").not(".csf-no-script").csf_field_spinner(),s.find(".csf-field-switcher").not(".csf-no-script").csf_field_switcher(),s.find(".csf-field-tabbed").not(".csf-no-script").csf_field_tabbed(),s.find(".csf-field-typography").not(".csf-no-script").csf_field_typography(),s.find(".csf-field-upload").not(".csf-no-script").csf_field_upload(),s.find(".csf-help").not(".csf-no-script").csf_tooltip(),s.find(".csf-chosen").not(".csf-no-script").csf_chosen(),s.find(".csf-checker").not(".csf-no-script").csf_checker(),s.find(".csf-siblings").not(".csf-no-script").csf_siblings(),s.csf_dependency(n),s.data("inited",!0),e(t).trigger("csf-reload-script",s))})},s.vars.$window.on("resize csf.resize",s.helper.debounce(function(t){(navigator.userAgent.indexOf("AppleWebKit/")>-1?s.vars.$window.width():n.innerWidth)<=782&&!s.vars.onloaded&&(e(".csf-section").csf_reload_script(),s.vars.onloaded=!0)},200)).trigger("csf.resize"),e(t).ready(function(){e(".csf-save").csf_save(),e(".csf-confirm").csf_confirm(),e(".csf-nav-options").csf_nav_options(),e(".csf-nav-metabox").csf_nav_metabox(),e(".csf-expand-all").csf_expand_all(),e(".csf-search").csf_search(),e(".csf-sticky-header").csf_sticky(),e(".csf-taxonomy").csf_taxonomy(),e(".csf-shortcode").csf_shortcode(),e(".widgets-php").csf_widgets(),e(".csf-onload").csf_reload_script(),e(".csf-page-templates").csf_page_templates(),e(".csf-post-formats").csf_post_formats()})}(jQuery,window,document);