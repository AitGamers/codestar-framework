/* Codestar Framework | A Simple and Lightweight WordPress Option Framework - v2.0.1*/

!function(e,t,n,i){"use strict";var s=s||{};s.funcs={},s.vars={onloaded:!1,$window:e(t),$document:e(n),is_rtl:e("body").hasClass("rtl"),code_themes:[]},s.helper={inputs_rename:function(t){t.each(function(t){e(this).find(":input").each(function(){this.name=this.name.replace(/\[(\d+)\]/,"["+t+"]")})})},uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},debounce:function(e,t,n){var i;return function(){var s=this,c=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(s,c)},t),a&&e.apply(s,c)}},get_cookie:function(e){var t,i,s=n.cookie,c=e+"=";if(s){if(-1===(i=s.indexOf("; "+c))){if(0!==(i=s.indexOf(c)))return null}else i+=2;return-1===(t=s.indexOf(";",i))&&(t=s.length),decodeURIComponent(s.substring(i+c.length,t))}},set_cookie:function(e,t,i,s,c,a){var o=new Date;"object"==typeof i&&i.toGMTString?i=i.toGMTString():parseInt(i,10)?(o.setTime(o.getTime()+1e3*parseInt(i,10)),i=o.toGMTString()):i="",n.cookie=e+"="+encodeURIComponent(t)+(i?"; expires="+i:"")+(s?"; path="+s:"")+(c?"; domain="+c:"")+(a?"; secure":"")},remove_cookie:function(e,t,n,i){s.helper.set_cookie(e,"",-1e3,t,n,i)}},e.fn.csf_clone=function(){for(var t=e.fn.clone.apply(this,arguments),n=this.find("select").add(this.filter("select")),i=t.find("select").add(t.filter("select")),s=0;s<n.length;++s)for(var c=0;c<n[s].options.length;++c)!0===n[s].options[c].selected&&(i[s].options[c].selected=!0);return t},e.fn.csf_expand_all=function(){return this.each(function(){e(this).on("click",function(t){t.preventDefault(),e(".csf-wrapper").toggleClass("csf-show-all"),e(".csf-section").csf_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.csf_nav_options=function(){return this.each(function(){var n,s=e(this),c=s.find("a"),a=s.closest(".csf").find(".csf-section-id");e(t).on("hashchange",function(){var s=t.location.hash.match(new RegExp("tab=([^&]*)")),o=s?s[1]:c.first().attr("href").replace("#tab=",""),r=e("#csf-tab-link-"+o);if(r.length>0){r.closest(".csf-tab-depth-0").addClass("csf-tab-active").siblings().removeClass("csf-tab-active"),c.removeClass("csf-section-active"),r.addClass("csf-section-active"),n!==i&&n.hide();var f=e("#csf-section-"+o);f.css({display:"block"}),f.csf_reload_script(),a.val(o),n=f}}).trigger("hashchange")})},e.fn.csf_nav_metabox=function(){return this.each(function(){var t,n,c=e(this),a=c.find("a"),o=c.data("unique"),r=e("#post_ID").val()||"global";a.on("click",function(c){c.preventDefault();var a=e(this),f=a.data("section");n!==i&&n.removeClass("csf-section-active"),t!==i&&t.hide(),a.addClass("csf-section-active");var l=e("#csf-section-"+f);l.css({display:"block"}),l.csf_reload_script(),s.helper.set_cookie("csf-last-metabox-tab-"+r+"-"+o,f),t=l,n=a});var f=s.helper.get_cookie("csf-last-metabox-tab-"+r+"-"+o);f?c.find('a[data-section="'+f+'"]').trigger("click"):a.first("a").trigger("click")})},e.fn.csf_page_templates=function(){this.length&&e(n).on("change",".editor-page-attributes__template select, #page_template",function(){var t=e(this).val()||"default";e(".csf-page-templates").removeClass("csf-show").addClass("csf-hide"),e(".csf-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("csf-hide").addClass("csf-show")})},e.fn.csf_post_formats=function(){this.length&&e(n).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t=e(this).val()||"default";t="0"===t?"default":t,e(".csf-post-formats").removeClass("csf-show").addClass("csf-hide"),e(".csf-post-format-"+t).removeClass("csf-hide").addClass("csf-show")})},e.fn.csf_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var t=e(this).val(),n=e(".csf-wrapper"),i=n.find(".csf-section").find("> .csf-field:not(.hidden)"),s=i.find("> .csf-title, .csf-search-tags");t.length>3?(i.addClass("csf-hidden"),n.addClass("csf-search-all"),s.each(function(){var n=e(this);if(n.text().match(new RegExp(".*?"+t+".*?","i"))){var i=n.closest(".csf-field");i.removeClass("csf-hidden"),i.parent().csf_reload_script()}})):(i.removeClass("csf-hidden"),n.removeClass("csf-search-all"))})})},e.fn.csf_sticky=function(){return this.each(function(){var i=e(this),s=e(t),c=i.find(".csf-header-inner"),a=parseInt(c.css("padding-left"))+parseInt(c.css("padding-right")),o=0,r=!1,f=function(){r||requestAnimationFrame(function(){var e,s,f;e=i.offset().top,s=Math.max(32,e-o),f=Math.max(n.documentElement.clientWidth,t.innerWidth||0),s<=32&&f>782?(c.css({width:i.outerWidth()-a}),i.css({height:i.outerHeight()}).addClass("csf-sticky")):(c.removeAttr("style"),i.removeAttr("style").removeClass("csf-sticky")),r=!1}),r=!0},l=function(){o=s.scrollTop(),f()};s.on("scroll resize",l),l()})},e.fn.csf_dependency=function(){return this.each(function(){var t=e(this),n=e.csf_deps.createRuleset(),i=[];t.find("> [data-controller]").each(function(){console.log(t);var s=e(this),c=s.data("controller").split("|"),a=s.data("condition").split("|"),o=s.data("value").toString().split("|"),r=n;e.each(c,function(e,t){var n=o[e]||"",c=a[e]||a[0];(r=r.createRule('[data-depend-id="'+t+'"]',c,n)).include(s),i.push(t)})}),e.csf_deps.enable(t,n,i)})},e.fn.csf_field_accordion=function(){return this.each(function(){e(this).find(".csf-accordion-title").on("click",function(){var t=e(this),n=t.find(".csf-accordion-icon"),i=t.next();n.hasClass("fa-angle-right")?n.removeClass("fa-angle-right").addClass("fa-angle-down"):n.removeClass("fa-angle-down").addClass("fa-angle-right"),i.data("opened")||(i.csf_reload_script(),i.data("opened",!0)),i.toggleClass("csf-accordion-open")})})},e.fn.csf_field_backup=function(){return this.each(function(){if(t.wp.customize!==i){var n=e(this),s=e("body"),c=n.find(".csf-import"),a=n.find(".csf-reset"),o=!1;a.on("click",function(e){e.preventDefault(),o||(s.addClass("csf-opacity"),t.wp.ajax.post("csf-reset",{unique:a.data("unique"),nonce:a.data("nonce")}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),o=!1,s.removeClass("csf-opacity")})),o=!0}),c.on("click",function(e){e.preventDefault(),o||(s.addClass("csf-opacity"),t.wp.ajax.post("csf-import",{unique:c.data("unique"),nonce:c.data("nonce"),import_data:n.find(".csf-import-data").val()}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),o=!1,s.removeClass("csf-opacity")})),o=!0})}})},e.fn.csf_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var t=e(this),n=t.find("textarea"),i=t.find(".CodeMirror"),c=n.data("editor");i.length&&i.remove();var a=CodeMirror.fromTextArea(n[0],c);if("default"!==c.theme&&-1===s.vars.code_themes.indexOf(c.theme)){var o=e("<link>");e("#csf-codemirror-css").after(o),o.attr({rel:"stylesheet",id:"csf-codemirror-"+c.theme+"-css",href:c.cdnURL+"/theme/"+c.theme+".min.css",type:"text/css",media:"all"}),s.vars.code_themes.push(c.theme)}CodeMirror.modeURL=c.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(a,c.mode),a.on("change",function(e,t){n.val(a.getValue()).trigger("change")})}})},e.fn.csf_field_date=function(){return this.each(function(){var t,n=e(this).find("input"),i=n.data("settings"),s='<div class="csf-datepicker-wrapper"></div>',c={beforeShow:function(n,i){(t=e("#ui-datepicker-div")).wrap(s)},onClose:function(){var e=setInterval(function(){t.is(":hidden")&&(t.unwrap(s),clearInterval(e))},100)}};i=e.extend({},i,c),n.hasClass("hasDatepicker")&&n.removeAttr("id").removeClass("hasDatepicker"),n.datepicker(i)})},e.fn.csf_field_fieldset=function(){return this.each(function(){e(this).find(".csf-fieldset-content").csf_reload_script()})},e.fn.csf_field_gallery=function(){return this.each(function(){var n,i=e(this),s=i.find(".csf-edit-gallery"),c=i.find(".csf-clear-gallery"),a=i.find("ul"),o=i.find("input");i.find("img");i.on("click",".csf-button, .csf-edit-gallery",function(i){var r=e(this),f=o.val(),l=r.hasClass("csf-edit-gallery")?"edit":"add",d="add"!==l||f.length?"gallery-edit":"gallery";i.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&("gallery"===d?(n=t.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(n=t.wp.media.gallery.edit('[gallery ids="'+f+'"]'),"add"===l&&n.setState("gallery-library")),n.on("update",function(e){a.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;return a.append('<li><img src="'+n+'"></li>'),t.id});o.val(t.join(",")).trigger("change"),c.removeClass("hidden"),s.removeClass("hidden")}))}),c.on("click",function(e){e.preventDefault(),a.empty(),o.val("").trigger("change"),c.addClass("hidden"),s.addClass("hidden")})})},e.fn.csf_field_group=function(){return this.each(function(){var t=e(this),n=t.find(".csf-cloneable-wrapper"),i=t.find(".csf-cloneable-hidden"),c=t.find(".csf-cloneable-max"),a=t.find(".csf-cloneable-min"),o=n.data("unique-id"),r=parseInt(n.data("max")),f=parseInt(n.data("min"));n.accordion({header:".csf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"csf-cloneable-header-icon fa fa-angle-right",activeHeader:"csf-cloneable-header-icon fa fa-angle-down"},activate:function(e,t){var n=t.newPanel,i=t.newHeader;if(n.length&&!n.data("opened")){var s=n.children().first().find(":input").first(),c=i.find(".csf-cloneable-value");s.on("change keyup",function(e){c.text(s.val())}),n.csf_reload_script(),n.data("opened",!0),n.data("retry",!1)}else n.data("retry")&&(n.csf_reload_script_retry(),n.data("retry",!1))}}),n.sortable({axis:"y",handle:".csf-cloneable-title, .csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){n.accordion({active:!1}),n.sortable("refreshPositions"),t.item.find(".csf-cloneable-content").data("retry",!0)},update:function(e,t){s.helper.inputs_rename(n.find(".csf-cloneable-item")),n.csf_customizer_refresh()}}),t.on("click",".csf-cloneable-add",function(e){e.preventDefault();var t=n.find(".csf-cloneable-item").length;if(a.hide(),r&&t+1>r)c.show();else{var s=i.csf_clone().removeClass("csf-cloneable-hidden");s.find(":input").each(function(){this.name=this.name.replace("_nonce",o).replace("num",t)}),n.append(s),n.accordion("refresh"),n.accordion({active:t}),n.csf_customizer_refresh(),n.csf_customizer_listen({closest:!0})}}),n.on("click",".csf-cloneable-clone",function(t){t.preventDefault();var i=n.find(".csf-cloneable-item").length;if(a.hide(),r&&i+1>r)c.show();else{var o=e(this).closest(".csf-cloneable-item"),f=o.csf_clone().addClass("csf-cloned");n.children().eq(o.index()).after(f),s.helper.inputs_rename(n.find(".csf-cloneable-item")),n.accordion("refresh"),n.csf_customizer_refresh(),n.csf_customizer_listen({closest:!0})}}),n.on("click",".csf-cloneable-remove",function(t){t.preventDefault();var i=n.find(".csf-cloneable-item").length;c.hide(),a.hide(),f&&i-1<f?a.show():(e(this).closest(".csf-cloneable-item").remove(),s.helper.inputs_rename(n.find(".csf-cloneable-item")),n.csf_customizer_refresh())})})},e.fn.csf_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".csf-icon-add",function(i){i.preventDefault();var c=e(this),a=e("#csf-modal-icon");a.show(),s.vars.$icon_target=n,s.vars.icon_modal_loaded||(a.find(".csf-modal-loading").show(),t.wp.ajax.post("csf-get-icons",{nonce:c.data("nonce")}).done(function(t){a.find(".csf-modal-loading").hide(),s.vars.icon_modal_loaded=!0;var n=a.find(".csf-modal-load").html(t.content);n.on("click","a",function(t){t.preventDefault();var n=e(this).data("csf-icon");s.vars.$icon_target.find("i").removeAttr("class").addClass(n),s.vars.$icon_target.find("input").val(n).trigger("change"),s.vars.$icon_target.find(".csf-icon-preview").removeClass("hidden"),s.vars.$icon_target.find(".csf-icon-remove").removeClass("hidden"),a.hide()}),a.on("change keyup",".csf-icon-search",function(){var t=e(this).val();n.find("a").each(function(){var n=e(this);n.data("csf-icon").search(new RegExp(t,"i"))<0?n.hide():n.show()})}),a.on("click",".csf-modal-close, .csf-modal-overlay",function(){a.hide()})}))}),n.on("click",".csf-icon-remove",function(t){t.preventDefault(),n.find(".csf-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.csf_field_media=function(){return this.each(function(){var n,i=e(this),s=i.find(".csf--button"),c=i.find(".csf--remove");s.on("click",function(e){e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&(n?n.open():((n=t.wp.media({library:{type:s.data("library").split(",")}})).on("select",function(){var e,t=n.state().get("selection").first().attributes,a=s.data("preview-size")||"thumbnail";i.find(".csf--url").val(t.url),i.find(".csf--id").val(t.id),i.find(".csf--width").val(t.width),i.find(".csf--height").val(t.height),i.find(".csf--alt").val(t.alt),i.find(".csf--title").val(t.title),i.find(".csf--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===a?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:t.icon,c.removeClass("hidden"),i.find(".csf--preview").removeClass("hidden"),i.find(".csf--src").attr("src",e),i.find(".csf--thumbnail").val(e).trigger("change")}),n.open()))}),c.on("click",function(e){e.preventDefault(),c.addClass("hidden"),i.find(".csf--preview").addClass("hidden"),i.find("input").val(""),i.find(".csf--thumbnail").trigger("change")})})},e.fn.csf_field_repeater=function(){return this.each(function(){var t=e(this),n=t.find(".csf-cloneable-wrapper"),i=t.find(".csf-cloneable-hidden"),c=t.find(".csf-cloneable-max"),a=t.find(".csf-cloneable-min"),o=n.data("unique-id"),r=parseInt(n.data("max")),f=parseInt(n.data("min"));n.find(".csf-cloneable-content").csf_reload_script(),n.sortable({axis:"y",handle:".csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){s.helper.inputs_rename(n.find(".csf-cloneable-item")),n.csf_customizer_refresh(),t.item.csf_reload_script_retry()}}),t.on("click",".csf-cloneable-add",function(e){e.preventDefault();var t=n.find(".csf-cloneable-item").length;if(a.hide(),r&&t+1>r)c.show();else{var s=i.csf_clone().removeClass("csf-cloneable-hidden");n.append(s),s.find(":input").each(function(){this.name=this.name.replace("_nonce",o).replace("num",t)}),s.find(".csf-cloneable-content").csf_reload_script(),n.csf_customizer_refresh(),n.csf_customizer_listen({closest:!0})}}),n.on("click",".csf-cloneable-clone",function(t){t.preventDefault();var i=n.find(".csf-cloneable-item").length;if(a.hide(),r&&i+1>r)c.show();else{var o=e(this).closest(".csf-cloneable-item"),f=o.index(),l=o.csf_clone();n.children().eq(f).after(l),l.addClass("csf-cloned").find(".csf-cloneable-content").csf_reload_script(),s.helper.inputs_rename(n.find(".csf-cloneable-item")),n.csf_customizer_refresh(),n.csf_customizer_listen(!0)}}),n.on("click",".csf-cloneable-remove",function(t){t.preventDefault();var i=n.find(".csf-cloneable-item").length;c.hide(),a.hide(),f&&i-1<f?a.show():(e(this).closest(".csf-cloneable-item").remove(),s.helper.inputs_rename(n),n.csf_customizer_refresh())})})},e.fn.csf_field_slider=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".csf-slider-ui"),s=n.data(),c=n.val()||0;i.hasClass("ui-slider")&&i.empty(),i.slider({range:"min",value:c,min:s.min,max:s.max,step:s.step,slide:function(e,t){n.val(t.value).trigger("change")}}),n.keyup(function(){i.slider("value",n.val())})})},e.fn.csf_field_sortable=function(){return this.each(function(){var t=e(this).find(".csf--sortable");t.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,n){t.csf_customizer_refresh()}}),t.find(".csf--sortable-content").csf_reload_script()})},e.fn.csf_field_sorter=function(){return this.each(function(){var t=e(this),n=t.find(".csf-enabled"),i=t.find(".csf-disabled"),s=!!i.length&&i;n.sortable({connectWith:s,placeholder:"ui-sortable-placeholder",update:function(e,n){var i=n.item.find("input");n.item.parent().hasClass("csf-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),t.csf_customizer_refresh()}}),s&&s.sortable({connectWith:n,placeholder:"ui-sortable-placeholder"})})},e.fn.csf_field_spinner=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".ui-spinner-button");i.length&&i.remove(),n.spinner({max:n.data("max")||100,min:n.data("min")||0,step:n.data("step")||1,spin:function(e,t){n.val(t.value).trigger("change")}})})},e.fn.csf_field_switcher=function(){return this.each(function(){var t=e(this).find(".csf--switcher");t.on("click",function(){var e=0,n=t.find("input");t.hasClass("csf--active")?t.removeClass("csf--active"):(e=1,t.addClass("csf--active")),n.val(e).trigger("change")})})},e.fn.csf_field_tabbed=function(){return this.each(function(){var t=e(this),n=t.find(".csf-tabbed-nav a"),i=t.find(".csf-tabbed-section");i.eq(0).csf_reload_script(),n.on("click",function(t){t.preventDefault();var n=e(this),s=n.index(),c=i.eq(s);n.addClass("csf-tabbed-active").siblings().removeClass("csf-tabbed-active"),c.csf_reload_script(),c.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.csf_field_typography=function(){return this.each(function(){var t=this,n=e(this),i=[],c=csf_typography_json.webfonts,a=csf_typography_json.googlestyles,o=csf_typography_json.defaultstyles;t.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},t.sanitize_style=function(e){return a[e]?a[e]:e},t.load_google_font=function(e,t,n){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",(t||n)&&(e=e+":"+t+n),-1===i.indexOf(e)&&WebFont.load({google:{families:[e]}}),i.push(e))},t.append_select_options=function(n,i,s,c,a){n.find("option").not(":first").remove();var o="";e.each(i,function(e,n){var i,r=n;i=a?s&&-1!==s.indexOf(n)?" selected":"":s&&s===n?" selected":"","subset"===c?r=t.sanitize_subset(n):"style"===c&&(r=t.sanitize_style(n)),o+='<option value="'+n+'"'+i+">"+r+"</option>"}),n.append(o).trigger("csf.change").trigger("chosen:updated")},t.init=function(){var i=[],a=n.find(".csf--typography"),r=n.find(".csf--type"),f=a.data("unit"),l=a.data("exclude")?a.data("exclude").split(","):[];n.find(".csf--chosen").length&&n.find("select").each(function(){var t=e(this),n=t.parent().find(".chosen-container");n.length&&n.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})});var d=n.find(".csf--font-family"),h=d.val();d.find("option").not(":first-child").remove();var u="";e.each(c,function(t,n){l&&-1!==l.indexOf(t)||(u+='<optgroup label="'+n.label+'">',e.each(n.fonts,function(e,n){u+='<option value="'+(n="object"==typeof n?e:n)+'" data-type="'+t+'"'+(n===h?" selected":"")+">"+n+"</option>"}),u+="</optgroup>")}),d.append(u).trigger("chosen:updated");var p=n.find(".csf--block-font-style");if(p.length){var v=n.find(".csf--font-style-select"),g=v.val()?v.val().replace(/normal/g,""):"";v.on("change csf.change",function(e){var t=v.val();!t&&i&&-1===i.indexOf("normal")&&(t=i[0]);var s=t&&"italic"!==t&&"normal"===t?"normal":"",c=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):s,a=t&&"italic"===t.substr(-6)?"italic":"";n.find(".csf--font-weight").val(c),n.find(".csf--font-style").val(a)});var _=n.find(".csf--block-extra-styles");if(_.length)var m=n.find(".csf--extra-styles"),b=m.val()}var y=n.find(".csf--block-subset");if(y.length)var C=n.find(".csf--subset"),w=C.val(),k=C.data("multiple")||!1;var x=n.find(".csf--block-backup-font-family");d.on("change csf.change",function(e){y.length&&y.addClass("hidden"),_.length&&_.addClass("hidden"),x.length&&x.addClass("hidden");var n=d.find(":selected"),s=n.val(),a=n.data("type");if(a&&s){if("google"!==a&&"custom"!==a||!x.length||x.removeClass("hidden"),p.length){var f=o;"google"===a&&c[a].fonts[s][0]?f=c[a].fonts[s][0]:"custom"===a&&c[a].fonts[s]&&(f=c[a].fonts[s]),i=f;var l=-1!==f.indexOf("normal")?"normal":f[0],h=g&&-1!==f.indexOf(g)?g:l;t.append_select_options(v,f,h,"style"),g=!1,p.removeClass("hidden"),"google"===a&&_.length&&f.length>1&&(t.append_select_options(m,f,b,"style",!0),b=!1,_.removeClass("hidden"))}if("google"===a&&y.length&&c[a].fonts[s][1]){var u=c[a].fonts[s][1],z=u.length<2&&"latin"!==u[0]?u[0]:"",D=w&&-1!==u.indexOf(w)?w:z;D=k&&w?w:D,t.append_select_options(C,u,D,"subset",k),w=!1,y.removeClass("hidden")}}else y.length&&(C.find("option").not(":first-child").remove(),C.trigger("chosen:updated")),p.length&&(v.find("option").not(":first-child").remove(),v.trigger("chosen:updated"));r.val(a)}).trigger("csf.change");var z=n.find(".csf--block-preview");if(z.length){var D=n.find(".csf--preview");n.on("change",s.helper.debounce(function(e){z.removeClass("hidden");var i=d.val(),s=n.find(".csf--font-weight").val(),c=n.find(".csf--font-style").val(),a=n.find(".csf--font-size").val(),o=n.find(".csf--font-variant").val(),r=n.find(".csf--line-height").val(),l=n.find(".csf--text-align").val(),h=n.find(".csf--text-transform").val(),u=n.find(".csf--text-decoration").val(),p=n.find(".csf--color").val(),v=n.find(".csf--word-spacing").val(),g=n.find(".csf--letter-spacing").val(),_=n.find(".csf--custom-style").val();"google"===n.find(".csf--type").val()&&t.load_google_font(i,s,c);var m={};i&&(m.fontFamily=i),s&&(m.fontWeight=s),c&&(m.fontStyle=c),o&&(m.fontVariant=o),a&&(m.fontSize=a+f),r&&(m.lineHeight=r+f),g&&(m.letterSpacing=g+f),v&&(m.wordSpacing=v+f),l&&(m.textAlign=l),h&&(m.textTransform=h),u&&(m.textDecoration=u),p&&(m.color=p),D.removeAttr("style"),_&&D.attr("style",_),D.css(m)},100)),z.on("click",function(){D.toggleClass("csf--black-background");var e=z.find(".csf--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),z.hasClass("hidden")||n.trigger("change")}},t.init()})},e.fn.csf_field_upload=function(){return this.each(function(){var n,i=e(this),s=i.find("input"),c=i.find(".csf--button"),a=i.find(".csf--remove");c.data("library")&&c.data("library").split(",");s.on("change",function(e){s.val()?a.removeClass("hidden"):a.addClass("hidden")}),c.on("click",function(e){e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&(n?n.open():((n=t.wp.media({library:{type:c.data("library").split(",")}})).on("select",function(){s.val(n.state().get("selection").first().attributes.url).trigger("change")}),n.open()))}),a.on("click",function(e){e.preventDefault(),s.val("").trigger("change")})})},e.fn.csf_confirm=function(){return this.each(function(){e(this).on("click",function(e){confirm("Are you sure?")||e.preventDefault()})})},e.fn.serializeObject=function(){var t={};return e.each(this.serializeArray(),function(n,s){var c=s.name,a=s.value;t[c]=t[c]===i?a:e.isArray(t[c])?t[c].concat(a):[t[c],a]}),t},e.fn.csf_save=function(){return this.each(function(){var n,i=e(this),s=e(".csf-save"),c=e(".csf-options"),a=!1;i.on("click",function(o){if(!a){var r=i.data("save"),f=i.val();s.attr("value",r),i.hasClass("csf-save-ajax")&&(o.preventDefault(),c.addClass("csf-saving"),s.prop("disabled",!0),t.wp.ajax.post("csf_"+c.data("unique")+"_ajax_save",{data:e("#csf-form").serializeJSONCSF()}).done(function(t){clearTimeout(n);var i=e(".csf-form-success");i.empty().append(t.notice).slideDown("fast",function(){n=setTimeout(function(){i.slideUp("fast")},2e3)}),e(".csf-error").remove();var o=e(".csf-form-error");if(o.empty().hide(),Object.keys(t.errors).length){var r='<i class="csf-label-error csf-error">!</i>';e.each(t.errors,function(t,n){var i=e('[data-depend-id="'+t+'"]'),s=e("#csf-tab-link-"+(i.closest(".csf-section").index()+1)),c=s.closest(".csf-tab-depth-0");i.closest(".csf-fieldset").append('<p class="csf-text-error csf-error">'+n+"</p>"),s.find(".csf-error").length||s.append(r),c.find(".csf-arrow .csf-error").length||c.find(".csf-arrow").append(r),console.log(n),o.append("<div>"+r+" "+n+"</div>")}),o.show()}c.removeClass("csf-saving"),s.prop("disabled",!1).attr("value",f),a=!1}).fail(function(e){alert(e.error)}))}a=!0})})},e.fn.csf_taxonomy=function(){return this.each(function(){var t=e(this),n=t.parents("form");if("addtag"===n.attr("id")){var i=n.find("#submit"),s=t.find(".csf-field").csf_clone();i.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(t.data("inited",!1),t.empty(),t.html(s),s=s.csf_clone(),t.csf_reload_script())})}})},e.fn.csf_shortcode=function(){var c=this;return c.shortcode_parse=function(t,n){var i="";return e.each(t,function(t,s){i+="["+(n=n||t),e.each(s,function(e,t){"content"===e?(i+="]",i+=t,i+="[/"+n):i+=c.shortcode_tags(e,t)}),i+="]"}),i},c.shortcode_tags=function(t,n){var i="";return""!==n&&("object"!=typeof n||e.isArray(n)?i+=" "+t.replace("-","_")+'="'+n.toString()+'"':e.each(n,function(e,t){switch(e){case"background-image":t=t.url?t.url:""}""!==t&&(i+=" "+e.replace("-","_")+'="'+t.toString()+'"')})),i},c.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},c.send_to_editor=function(t,n){var i;if("undefined"!=typeof tinymce&&(i=tinymce.get(n)),i&&!i.isHidden())i.execCommand("mceInsertContent",!1,t);else{var s=e("#"+n);s.val(c.insertAtChars(s,t)).trigger("change")}},this.each(function(){var a,o,r,f,l,d,h,u,p,v=e(this),g=v.find(".csf-modal-load"),_=(v.find(".csf-modal-content"),v.find(".csf-modal-insert")),m=v.find(".csf-modal-loading"),b=v.find("select"),y=v.data("modal-id"),C=v.data("nonce");e(n).on("click",'.csf-shortcode-button[data-modal-id="'+y+'"]',function(t){t.preventDefault(),p=e(this),a=p.data("editor-id")||!1,o=p.data("target-id")||!1,r=p.data("gutenberg-id")||!1,v.show(),v.hasClass("csf-shortcode-single")&&l===i&&b.trigger("change")}),b.on("change",function(){var n=e(this),i=n.find(":selected");f=n.val(),l=i.data("shortcode"),d=i.data("view")||"normal",h=i.data("group")||l,g.empty(),f?(m.show(),t.wp.ajax.post("csf-get-shortcode-"+y,{shortcode_key:f,nonce:C}).done(function(t){m.hide();var n=e(t.content).appendTo(g);_.parent().removeClass("hidden"),u=n.find(".csf--repeat-shortcode").csf_clone(),n.csf_reload_script(),n.find(".csf-fields").csf_reload_script()})):_.parent().addClass("hidden")}),_.on("click",function(n){n.preventDefault();var i="",s=v.find(".csf-field:not(.hidden)").find(":input").serializeObjectCSF();switch(d){case"contents":var f=l?s[l]:s;e.each(f,function(e,t){var n=l||e;i+="["+n+"]"+t+"[/"+n+"]"});break;case"group":i+="["+l,e.each(s[l],function(e,t){i+=c.shortcode_tags(e,t)}),i+="]",i+=c.shortcode_parse(s[h],h),i+="[/"+l+"]";break;case"repeater":i+=c.shortcode_parse(s[h],h);break;default:i+=c.shortcode_parse(s)}if(r){var u=t.csf_gutenberg_props.attributes.hasOwnProperty("shortcode")?t.csf_gutenberg_props.attributes.shortcode:"";t.csf_gutenberg_props.setAttributes({shortcode:u+i})}else if(a)c.send_to_editor(i,a);else{var g=o?e(o):p.parent().find("textarea");g.val(c.insertAtChars(g,i)).trigger("change")}v.hide()}),v.on("click",".csf--repeat-button",function(e){e.preventDefault();var t=v.find(".csf--repeatable"),n=u.csf_clone(),i=n.find(".csf-repeat-remove");n.appendTo(t);n.find(".csf-fields").csf_reload_script(),s.helper.inputs_rename(v.find(".csf--repeat-shortcode")),i.on("click",function(){n.remove(),s.helper.inputs_rename(v.find(".csf--repeat-shortcode"))})}),v.on("click",".csf-modal-close, .csf-modal-overlay",function(){v.hide()})})},e.fn.csf_checkbox=function(){return this.each(function(){var t=e(this),n=0,i=t.find(".csf--input"),s=t.find(".csf--checkbox");"1"===i.val()?(n=0,s.prop("checked",!1)):(n=1,s.prop("checked",!0)),i.val(n).trigger("change")})},e.fn.csf_field_wp_editor=function(){return this.each(function(){if(void 0!==t.wp.editor&&void 0!==t.tinyMCEPreInit&&void 0!==t.tinyMCEPreInit.mceInit.csf_wp_editor){var i=e(this),c=i.find(".csf-wp-editor"),a=i.find("textarea");(i.find(".wp-editor-wrap").length||i.find(".mce-container").length)&&(c.empty(),c.append(a),a.css("display",""));var o=s.helper.uid("csf-editor-");a.attr("id",o);var r={tinymce:t.tinyMCEPreInit.mceInit.csf_wp_editor,quicktags:t.tinyMCEPreInit.qtInit.csf_wp_editor},f=c.data("editor-settings");if(r.tinymce=e.extend({},r.tinymce,{selector:"#"+o,setup:function(e){e.on("keyup",s.helper.debounce(function(){e.save(),a.trigger("change")},250))}}),!1===f.tinymce&&(r.tinymce=!1,c.addClass("csf-no-tinymce")),!1===f.quicktags&&(r.quicktags=!1,c.addClass("csf-no-quicktags")),setTimeout(function(){t.wp.editor.initialize(o,r)},250),f.media_buttons&&t.csf_media_buttons){var l=e(t.csf_media_buttons);l.find(".csf-shortcode-button").data("editor-id",o),e(n).on("wp-before-tinymce-init",function(e,t){t.selector===r.tinymce.selector&&c.prepend(l)})}}})},e.fn.csf_siblings=function(){return this.each(function(){var t=e(this),n=t.find(".csf--sibling"),i=t.data("multiple")||!1;n.on("click",function(){var n=e(this);i?n.hasClass("csf--active")?(n.removeClass("csf--active"),n.find("input").prop("checked",!1).trigger("change")):(n.addClass("csf--active"),n.find("input").prop("checked",!0).trigger("change")):(t.find("input").prop("checked",!1),n.find("input").prop("checked",!0).trigger("change"),n.addClass("csf--active").siblings().removeClass("csf--active"))})})},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),s.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:n,rgba:n<100}},e.fn.csf_color=function(){return this.each(function(){var n,i=e(this),c=s.funcs.parse_color(i.val()),a=!t.csf_vars.color_palette.length||t.csf_vars.color_palette;i.hasClass("wp-color-picker")&&i.closest(".wp-picker-container").after(i).remove(),i.wpColorPicker({palettes:a,clear:function(){i.trigger("keyup")},change:function(e,t){var s=t.color.toString();n.removeClass("csf--transparent-active"),n.find(".csf--transparent-offset").css("background-color",s),i.val(s).trigger("change")},create:function(){n=i.closest(".wp-picker-container");var t=i.data("a8cIris"),a=e('<div class="csf--transparent-wrap"><div class="csf--transparent-slider"></div><div class="csf--transparent-offset"></div><div class="csf--transparent-text"></div><div class="csf--transparent-button button button-small">transparent</div></div>').appendTo(n.find(".wp-picker-holder")),o=a.find(".csf--transparent-slider"),r=a.find(".csf--transparent-text"),f=a.find(".csf--transparent-offset"),l=a.find(".csf--transparent-button");"transparent"===i.val()&&n.addClass("csf--transparent-active"),l.on("click",function(){"transparent"!==i.val()?(i.val("transparent").trigger("change"),n.addClass("csf--transparent-active")):(i.val(t._color.toString()).trigger("change"),n.removeClass("csf--transparent-active"))}),o.slider({value:c.transparent,step:1,min:0,max:100,slide:function(e,n){var s=parseFloat(n.value/100);t._color._alpha=s,i.wpColorPicker("color",t._color.toString()),r.text(1===s||0===s?"":s)},create:function(){var l=parseFloat(c.transparent/100),d=l<1?l:"";r.text(d),f.css("background-color",c.value),n.on("click",".wp-picker-clear",function(){t._color._alpha=1,r.text("").trigger("change"),o.slider("option","value",100).trigger("slide")}),n.on("click",".wp-picker-default",function(){var e=s.funcs.parse_color(i.data("default-color")),n=parseFloat(e.transparent/100),c=n<1?n:"";t._color._alpha=n,r.text(c),o.slider("option","value",e.transparent).trigger("slide")}),n.on("click",".wp-color-result",function(){a.toggle()}),e("body").on("click.wpcolorpicker",function(){a.hide()})}})}})})},e.fn.csf_chosen=function(){return this.each(function(){var t=e(this),n=t.parent().find(".chosen-container"),i=t.attr("multiple")||!1?"100%":"auto",s=e.extend({allow_single_deselect:!0,disable_search_threshold:15,width:i},t.data());n.length&&n.remove(),t.chosen(s)})},e.fn.csf_number=function(){return this.each(function(){e(this).on("keypress",function(e){if(0!==e.keyCode&&8!==e.keyCode&&45!==e.keyCode&&46!==e.keyCode&&(e.keyCode<48||e.keyCode>57))return!1})})},e.fn.csf_help=function(){return this.each(function(){var t,n,c=e(this);c.on({mouseenter:function(){t=e('<div class="csf-tooltip"></div>').html(c.find(".csf-help-text").html()).appendTo("body"),n=s.vars.is_rtl?c.offset().left+24:c.offset().left-t.outerWidth(),t.css({top:c.offset().top-(t.outerHeight()/2-14),left:n})},mouseleave:function(){t!==i&&t.remove()}})})},e.fn.csf_customizer_refresh=function(){return this.each(function(){var s=e(this),c=s.closest(".csf-customize-complex");if(e(n).trigger("csf-customizer-refresh",s),t.wp.customize!==i&&0!==c.length){var a=c.find(":input"),o=c.data("unique-id"),r=c.data("option-id"),f=a.serializeObjectCSF(),l=e.isEmptyObject(f)?"":f[o][r];t.wp.customize.control(o+"["+r+"]").setting.set(l)}})},e.fn.csf_customizer_listen=function(n){var c=e.extend({closest:!1},n);return this.each(function(){if(t.wp.customize!==i){var n=c.closest?e(this).closest(".csf-customize-complex"):e(this),a=n.find(":input"),o=n.data("unique-id"),r=n.data("option-id");o!==i&&a.on("change keyup",s.helper.debounce(function(){var i=n.find(":input").serializeObjectCSF(),s=e.isEmptyObject(i)?"":i[o][r];t.wp.customize.control(o+"["+r+"]").setting.set(s)},250))}})},e(n).on("expanded",".control-section-csf",function(){var t=e(this);t.hasClass("open")&&!t.data("inited")&&(t.csf_dependency(),t.find(".csf-customize-field").csf_reload_script({dependency:!1}),t.find(".csf-customize-complex").csf_customizer_listen(),t.data("inited",!0))}),e.fn.csf_reload_script_retry=function(){return this.each(function(){e(this).find("> .csf-field-wp_editor").csf_field_wp_editor()})},e.fn.csf_reload_script=function(t){var i=e.extend({dependency:!0},t);return this.each(function(){var t=e(this);t.data("inited")||(t.find("> .csf-field-accordion").csf_field_accordion(),t.find("> .csf-field-backup").csf_field_backup(),t.find("> .csf-field-code_editor").csf_field_code_editor(),t.find("> .csf-field-date").csf_field_date(),t.find("> .csf-field-fieldset").csf_field_fieldset(),t.find("> .csf-field-gallery").csf_field_gallery(),t.find("> .csf-field-group").csf_field_group(),t.find("> .csf-field-icon").csf_field_icon(),t.find("> .csf-field-media").csf_field_media(),t.find("> .csf-field-repeater").csf_field_repeater(),t.find("> .csf-field-slider").csf_field_slider(),t.find("> .csf-field-sortable").csf_field_sortable(),t.find("> .csf-field-sorter").csf_field_sorter(),t.find("> .csf-field-spinner").csf_field_spinner(),t.find("> .csf-field-switcher").csf_field_switcher(),t.find("> .csf-field-tabbed").csf_field_tabbed(),t.find("> .csf-field-typography").csf_field_typography(),t.find("> .csf-field-upload").csf_field_upload(),t.find("> .csf-field-wp_editor").csf_field_wp_editor(),t.find("> .csf-field-border").find(".csf-color").csf_color(),t.find("> .csf-field-background").find(".csf-color").csf_color(),t.find("> .csf-field-color").find(".csf-color").csf_color(),t.find("> .csf-field-color_group").find(".csf-color").csf_color(),t.find("> .csf-field-link_color").find(".csf-color").csf_color(),t.find("> .csf-field-typography").find(".csf-color").csf_color(),t.find("> .csf-field-dimensions").find(".csf-number").csf_number(),t.find("> .csf-field-slider").find(".csf-number").csf_number(),t.find("> .csf-field-spacing").find(".csf-number").csf_number(),t.find("> .csf-field-spinner").find(".csf-number").csf_number(),t.find("> .csf-field-typography").find(".csf-number").csf_number(),t.find("> .csf-field-select").find(".csf-chosen").csf_chosen(),t.find("> .csf-field-checkbox").find(".csf-checkbox").csf_checkbox(),t.find("> .csf-field-button_set").find(".csf-siblings").csf_siblings(),t.find("> .csf-field-image_select").find(".csf-siblings").csf_siblings(),t.find("> .csf-field-palette").find(".csf-siblings").csf_siblings(),t.find("> .csf-field").find(".csf-help").csf_help(),i.dependency&&t.csf_dependency(),t.data("inited",!0),e(n).trigger("csf-reload-script",t))})},s.vars.$window.on("resize csf.resize",s.helper.debounce(function(n){(navigator.userAgent.indexOf("AppleWebKit/")>-1?s.vars.$window.width():t.innerWidth)<=782&&!s.vars.onloaded&&(e(".csf-section").csf_reload_script(),s.vars.onloaded=!0)},200)).trigger("csf.resize"),e(n).ready(function(){e(".csf-save").csf_save(),e(".csf-confirm").csf_confirm(),e(".csf-nav-options").csf_nav_options(),e(".csf-nav-metabox").csf_nav_metabox(),e(".csf-expand-all").csf_expand_all(),e(".csf-search").csf_search(),e(".csf-sticky-header").csf_sticky(),e(".csf-taxonomy").csf_taxonomy(),e(".csf-shortcode").csf_shortcode(),e(".csf-page-templates").csf_page_templates(),e(".csf-post-formats").csf_post_formats(),e(".csf-onload").csf_reload_script()})}(jQuery,window,document);